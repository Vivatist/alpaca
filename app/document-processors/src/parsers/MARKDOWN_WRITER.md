# Markdown Writer - –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–∞—Ä—Å–∏–Ω–≥–∞

## üìÑ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

`markdown_writer.py` - —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –º–æ–¥—É–ª—å –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤—Å–µ—Ö –ø–∞—Ä—Å–µ—Ä–æ–≤ (PDF, Word, Mock) –≤ –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ Markdown —Å YAML frontmatter.

## üéØ –ü—Ä–æ–±–ª–µ–º–∞, –∫–æ—Ç–æ—Ä—É—é —Ä–µ—à–∞–µ—Ç

**–î–û —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞:**
- –ö–∞–∂–¥–∞—è Celery task –¥—É–±–ª–∏—Ä–æ–≤–∞–ª–∞ –∫–æ–¥ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–º—ë–Ω —Ñ–∞–π–ª–æ–≤
- –†–∞–∑–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Ç—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏–∏ –≤ `pdf_tasks.py` –∏ `word_tasks.py`
- –°–ª–æ–∂–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏–µ —Ñ–æ—Ä–º–∞—Ç–∞ –≤—ã–≤–æ–¥–∞
- –õ–æ–≥–∏–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–∞–∑–º–∞–∑–∞–Ω–∞ –ø–æ 3 —Ñ–∞–π–ª–∞–º

**–ü–û–°–õ–ï —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞:**
- ‚úÖ –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ (Single Responsibility)
- ‚úÖ DRY (Don't Repeat Yourself) - –∫–æ–¥ –Ω–µ –¥—É–±–ª–∏—Ä—É–µ—Ç—Å—è
- ‚úÖ –ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏–µ —Ñ–æ—Ä–º–∞—Ç–æ–≤ –¥–ª—è –≤—Å–µ—Ö –ø–∞—Ä—Å–µ—Ä–æ–≤
- ‚úÖ –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              Parser (PDF/Word/Mock)                          ‚îÇ
‚îÇ  parse() ‚Üí {yaml_header, markdown, metadata, success}       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     ‚îÇ
                     ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ          Celery Task (pdf_tasks/word_tasks)                 ‚îÇ
‚îÇ  ‚Ä¢ –ü–æ–ª—É—á–∞–µ—Ç parse_result –æ—Ç –ø–∞—Ä—Å–µ—Ä–∞                         ‚îÇ
‚îÇ  ‚Ä¢ –í—ã–∑—ã–≤–∞–µ—Ç markdown_writer.save()                          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     ‚îÇ
                     ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              MarkdownWriter.save()                          ‚îÇ
‚îÇ  1. –í–∞–ª–∏–¥–∞—Ü–∏—è parse_result                                  ‚îÇ
‚îÇ  2. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–º–µ–Ω–∏: {timestamp}_{safe_name}.md             ‚îÇ
‚îÇ  3. –°–±–æ—Ä–∫–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞: YAML + Markdown                        ‚îÇ
‚îÇ  4. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ /volume_md/                                ‚îÇ
‚îÇ  5. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ + –≤–æ–∑–≤—Ä–∞—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞                        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     ‚îÇ
                     ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ        /volume_md/20251028_143000_123_Dogovor.md            ‚îÇ
‚îÇ  ---                                                         ‚îÇ
‚îÇ  document_type: pdf                                          ‚îÇ
‚îÇ  file_name: –î–æ–≥–æ–≤–æ—Ä 123.pdf                                  ‚îÇ
‚îÇ  ...                                                         ‚îÇ
‚îÇ  ---                                                         ‚îÇ
‚îÇ                                                              ‚îÇ
‚îÇ  # –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞                                      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üîë –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### 1. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –±–µ–∑–æ–ø–∞—Å–Ω—ã—Ö –∏–º—ë–Ω —Ñ–∞–π–ª–æ–≤

```python
# –í—Ö–æ–¥: "–î–æ–≥–æ–≤–æ—Ä –ø–æ—Å—Ç–∞–≤–∫–∏ ‚Ññ123.pdf"
# –í—ã—Ö–æ–¥: "20251028_143000_123_Dogovor_postavki_123.md"

markdown_writer.save(parse_result, "–î–æ–≥–æ–≤–æ—Ä –ø–æ—Å—Ç–∞–≤–∫–∏ ‚Ññ123.pdf")
```

**–ü—Ä–æ—Ü–µ—Å—Å:**
1. Timestamp: `YYYYMMdd_HHmmss_fff` (—Å –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞–º–∏)
2. –¢—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏—è –∫–∏—Ä–∏–ª–ª–∏—Ü—ã: `–∞‚Üía, –±‚Üíb, ...`
3. –£–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤: `‚Ññ`, `?`, `/`, `\`
4. –ó–∞–º–µ–Ω–∞ –ø—Ä–æ–±–µ–ª–æ–≤ –Ω–∞ `_`
5. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–ª–∏–Ω—ã: max 100 —Å–∏–º–≤–æ–ª–æ–≤

### 2. –¢—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏—è —Ä—É—Å—Å–∫–∏—Ö —Å–∏–º–≤–æ–ª–æ–≤

```python
# –ü–æ–ª–Ω–∞—è –∫–∞—Ä—Ç–∞ —Ç—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏–∏ –¥–ª—è —Ä—É—Å—Å–∫–æ–≥–æ –∞–ª—Ñ–∞–≤–∏—Ç–∞
'–∞' ‚Üí 'a',  '–±' ‚Üí 'b',  '–≤' ‚Üí 'v',  '–≥' ‚Üí 'g'
'–¥' ‚Üí 'd',  '–µ' ‚Üí 'e',  '—ë' ‚Üí 'yo', '–∂' ‚Üí 'zh'
'–∑' ‚Üí 'z',  '–∏' ‚Üí 'i',  '–π' ‚Üí 'y',  '–∫' ‚Üí 'k'
'–ª' ‚Üí 'l',  '–º' ‚Üí 'm',  '–Ω' ‚Üí 'n',  '–æ' ‚Üí 'o'
'–ø' ‚Üí 'p',  '—Ä' ‚Üí 'r',  '—Å' ‚Üí 's',  '—Ç' ‚Üí 't'
'—É' ‚Üí 'u',  '—Ñ' ‚Üí 'f',  '—Ö' ‚Üí 'h',  '—Ü' ‚Üí 'ts'
'—á' ‚Üí 'ch', '—à' ‚Üí 'sh', '—â' ‚Üí 'sch', '—ã' ‚Üí 'y'
'—ç' ‚Üí 'e',  '—é' ‚Üí 'yu', '—è' ‚Üí 'ya'
# + –∑–∞–≥–ª–∞–≤–Ω—ã–µ –±—É–∫–≤—ã
```

**–ó–∞—á–µ–º:** 
- –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å Windows/Linux —Ñ–∞–π–ª–æ–≤—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏
- –ß–∏—Ç–∞–µ–º–æ—Å—Ç—å URL –ø—Ä–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å web
- –ò–∑–±–µ–∂–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º —Å –∫–æ–¥–∏—Ä–æ–≤–∫–∞–º–∏

### 3. –°–±–æ—Ä–∫–∞ YAML + Markdown

```python
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–±–æ—Ä–∫–∞ —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
def _assemble_content(yaml_header: str, markdown_content: str) -> str:
    # –î–æ–±–∞–≤–ª—è–µ—Ç --- –µ—Å–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç
    if yaml_header and not yaml_header.startswith('---'):
        yaml_header = f"---\n{yaml_header}\n---"
    
    # –û–±—ä–µ–¥–∏–Ω—è–µ—Ç —Å –¥–≤–æ–π–Ω—ã–º –ø–µ—Ä–µ–≤–æ–¥–æ–º —Å—Ç—Ä–æ–∫–∏
    return f"{yaml_header}\n\n{markdown_content}"
```

### 4. –í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞

```python
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º
if not parse_result.get('success', False):
    return {'success': False, 'error': 'Parse result indicates failure'}

if not markdown_content:
    return {'success': False, 'error': 'Empty markdown content'}
```

## üìö API

### –û—Å–Ω–æ–≤–Ω–æ–π –º–µ—Ç–æ–¥: `save()`

```python
def save(
    parse_result: Dict,      # –†–µ–∑—É–ª—å—Ç–∞—Ç –ø–∞—Ä—Å–∏–Ω–≥–∞
    original_filename: str,  # –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ –∏–º—è —Ñ–∞–π–ª–∞
    timestamp: Optional[datetime] = None  # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –º–µ—Ç–∫–∞ –≤—Ä–µ–º–µ–Ω–∏
) -> Dict
```

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
```python
{
    'success': True,
    'markdown_file': '20251028_143000_123_Dogovor.md',
    'markdown_path': '/volume_md/20251028_143000_123_Dogovor.md',
    'markdown_length': 8542,
    'error': None  # –∏–ª–∏ —Å—Ç—Ä–æ–∫–∞ —Å –æ—à–∏–±–∫–æ–π
}
```

### –£–¥–æ–±–Ω–∞—è –æ–±—ë—Ä—Ç–∫–∞: `save_from_parser_result()`

```python
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑–≤–ª–µ–∫–∞–µ—Ç –∏–º—è —Ñ–∞–π–ª–∞ –∏–∑ –ø—É—Ç–∏
save_result = markdown_writer.save_from_parser_result(
    parse_result,
    file_path='/app/data/documents/–î–æ–≥–æ–≤–æ—Ä.pdf'
)
```

### Singleton pattern: `get_markdown_writer()`

```python
# –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä –¥–ª—è –≤—Å–µ—Ö –∑–∞–¥–∞—á
from parsers.markdown_writer import get_markdown_writer

markdown_writer = get_markdown_writer('/volume_md')
```

## üîß –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ Celery Tasks

### PDF Task (–ø—Ä–∏–º–µ—Ä)

```python
from parsers.markdown_writer import get_markdown_writer

markdown_writer = get_markdown_writer('/volume_md')

@app.task(bind=True)
def process_pdf_file(self, file_path: str, message: Dict) -> Dict:
    # 1. –ü–∞—Ä—Å–∏–Ω–≥ –¥–æ–∫—É–º–µ–Ω—Ç–∞
    parse_result = pdf_parser.parse(file_path)
    
    if not parse_result['success']:
        return {'status': 'error', 'error': parse_result['error']}
    
    # 2. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —á–µ—Ä–µ–∑ MarkdownWriter (–∑–∞–º–µ–Ω—è–µ—Ç –≤–µ—Å—å –±–ª–æ–∫ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–º–µ–Ω–∏)
    timestamp = datetime.utcnow()
    save_result = markdown_writer.save(parse_result, file_name, timestamp)
    
    if not save_result['success']:
        return {'status': 'error', 'error': save_result['error']}
    
    # 3. –í–æ–∑–≤—Ä–∞—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ —Å –¥–∞–Ω–Ω—ã–º–∏ –æ—Ç MarkdownWriter
    return {
        'status': 'success',
        'markdown_file': save_result['markdown_file'],
        'markdown_path': save_result['markdown_path'],
        'markdown_length': save_result['markdown_length'],
        'metadata': parse_result['metadata'],
        'message': f"Document saved to {save_result['markdown_file']}"
    }
```

### –ß—Ç–æ —É–±–∏—Ä–∞–µ—Ç—Å—è –∏–∑ tasks

**–£–î–ê–õ–ï–ù–û** (–¥—É–±–ª–∏—Ä–æ–≤–∞–ª–æ—Å—å –≤ –∫–∞–∂–¥–æ–π task):
```python
# ‚ùå –ì–µ–Ω–µ—Ä–∞—Ü–∏—è timestamp
timestamp = datetime.utcnow().strftime('%Y%m%d_%H%M%S_%f')[:-3]

# ‚ùå –¢—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏—è –∏–º–µ–Ω–∏
base_name = path.stem
safe_name = "".join(c for c in base_name if c.isalnum() or c in (' ', '-', '_')).strip()
safe_name = safe_name.replace(' ', '_')[:100]
md_filename = f"{timestamp}_{safe_name}.md"

# ‚ùå –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
output_dir = Path('/volume_md')
output_dir.mkdir(parents=True, exist_ok=True)
md_file_path = output_dir / md_filename

# ‚ùå –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–∞
save_success = parser.save_to_markdown_file(parse_result, str(md_file_path))
```

**–ó–ê–ú–ï–ù–ï–ù–û –ù–ê** (1 —Å—Ç—Ä–æ–∫–∞):
```python
# ‚úÖ –í—Å—ë –≤ –æ–¥–Ω–æ–º –≤—ã–∑–æ–≤–µ
save_result = markdown_writer.save(parse_result, file_name, timestamp)
```

## üìä –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

### –ú–µ—Ç—Ä–∏–∫–∏ –∫–æ–¥–∞

| –ú–µ—Ç—Ä–∏–∫–∞ | –î–æ | –ü–æ—Å–ª–µ | –£–ª—É—á—à–µ–Ω–∏–µ |
|---------|-----|--------|-----------|
| **–°—Ç—Ä–æ–∫ –≤ pdf_tasks.py** | 145 | 115 | -30 —Å—Ç—Ä–æ–∫ |
| **–°—Ç—Ä–æ–∫ –≤ word_tasks.py** | 140 | 110 | -30 —Å—Ç—Ä–æ–∫ |
| **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞** | ~60 —Å—Ç—Ä–æ–∫ | 0 | -60 —Å—Ç—Ä–æ–∫ |
| **–¢–æ—á–µ–∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è** | 3 —Ñ–∞–π–ª–∞ | 1 —Ñ–∞–π–ª | 66% –º–µ–Ω—å—à–µ |
| **–¢—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏—è** | 2 –≤–∞—Ä–∏–∞–Ω—Ç–∞ | 1 —ç—Ç–∞–ª–æ–Ω | –ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏–µ |

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç—å

**–î–æ:**
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–∞ –∏–º–µ–Ω–∏ ‚Üí –ø—Ä–∞–≤–∫–∏ –≤ 3 —Ñ–∞–π–ª–∞—Ö (pdf_tasks, word_tasks, —Ç–µ—Å—Ç—ã)
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–∞—Ä—Å–µ—Ä–∞ ‚Üí –∫–æ–ø–∏–ø–∞—Å—Ç–∞ –ª–æ–≥–∏–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
- –ë–∞–≥ –≤ —Ç—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏–∏ ‚Üí –∏—Å–ø—Ä–∞–≤–ª—è—Ç—å –≤ 2+ –º–µ—Å—Ç–∞—Ö

**–ü–æ—Å–ª–µ:**
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–∞ –∏–º–µ–Ω–∏ ‚Üí –ø—Ä–∞–≤–∫–∏ –≤ 1 —Ñ–∞–π–ª–µ (markdown_writer.py)
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–∞—Ä—Å–µ—Ä–∞ ‚Üí –∏–º–ø–æ—Ä—Ç `get_markdown_writer()` (2 —Å—Ç—Ä–æ–∫–∏)
- –ë–∞–≥ –≤ —Ç—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏–∏ ‚Üí –∏—Å–ø—Ä–∞–≤–∏—Ç—å 1 —Ä–∞–∑, –ø—Ä–∏–º–µ–Ω–∏—Ç—Å—è –∫–æ –≤—Å–µ–º

### –¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å

```python
# –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ
def test_markdown_writer():
    writer = MarkdownWriter('/tmp/test_output')
    
    parse_result = {
        'success': True,
        'yaml_header': '---\ntitle: Test\n---',
        'markdown': '# Test content'
    }
    
    result = writer.save(parse_result, '–¢–µ—Å—Ç–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç.pdf')
    
    assert result['success'] == True
    assert 'Testovyy_dokument' in result['markdown_file']
    assert os.path.exists(result['markdown_path'])
```

## üöÄ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### Overhead –º–∏–Ω–∏–º–∞–ª–µ–Ω

- **Singleton pattern**: –°–æ–∑–¥–∞—ë—Ç—Å—è 1 —ç–∫–∑–µ–º–ø–ª—è—Ä –Ω–∞ worker
- **–ë–µ–∑ I/O –æ–ø–µ—Ä–∞—Ü–∏–π**: –ö—Ä–æ–º–µ —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ `write()`
- **–ë–µ–∑ –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π**: –¢–æ–ª—å–∫–æ stdlib (`pathlib`, `datetime`)

### –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

```
–°—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è (inline –≤ task):
  –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–º–µ–Ω–∏:     ~0.001s
  –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏: ~0.002s
  –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–∞:    ~0.005s
  –ò–¢–û–ì–û:               ~0.008s

–ù–æ–≤–∞—è –≤–µ—Ä—Å–∏—è (MarkdownWriter):
  markdown_writer.save(): ~0.008s
  –ò–¢–û–ì–û:                  ~0.008s
```

**–í—ã–≤–æ–¥:** Overhead –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç, –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏–¥–µ–Ω—Ç–∏—á–Ω–∞.

## üîç –ü—Ä–∏–º–µ—Ä—ã –∏–º—ë–Ω —Ñ–∞–π–ª–æ–≤

### –†–∞–∑–Ω—ã–µ —Ç–∏–ø—ã –≤—Ö–æ–¥–Ω—ã—Ö –∏–º—ë–Ω

```python
# –†—É—Å—Å–∫–∏–π —Ç–µ–∫—Å—Ç
"–î–æ–≥–æ–≤–æ—Ä –ø–æ—Å—Ç–∞–≤–∫–∏.pdf"
‚Üí "20251028_143000_123_Dogovor_postavki.md"

# –¶–∏—Ñ—Ä—ã –∏ —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª—ã
"–ü—Ä–æ—Ç–æ–∫–æ–ª ‚Ññ145 –æ—Ç 15.05.2024.docx"
‚Üí "20251028_143005_456_Protokol_145_ot_15_05_2024.md"

# –¢–æ–ª—å–∫–æ –ª–∞—Ç–∏–Ω–∏—Ü–∞
"Contract_Agreement_2024.pdf"
‚Üí "20251028_143010_789_Contract_Agreement_2024.md"

# –°–º–µ—à–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç
"–û—Ç—á–µ—Ç Report_2024.xlsx"
‚Üí "20251028_143015_012_Otchet_Report_2024.md"

# –û—á–µ–Ω—å –¥–ª–∏–Ω–Ω–æ–µ –∏–º—è (–æ–±—Ä–µ–∑–∞–µ—Ç—Å—è)
"–û—á–µ–Ω—å_–¥–ª–∏–Ω–Ω–æ–µ_–Ω–∞–∑–≤–∞–Ω–∏–µ_–¥–æ–∫—É–º–µ–Ω—Ç–∞_–∫–æ—Ç–æ—Ä–æ–µ_–ø—Ä–µ–≤—ã—à–∞–µ—Ç_–º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é_–¥–ª–∏–Ω—É_–∏_–±—É–¥–µ—Ç_–æ–±—Ä–µ–∑–∞–Ω–æ.pdf"
‚Üí "20251028_143020_345_Ochen_dlinnoe_nazvanie_dokumenta_kotoroe_prevyshaet_maksimalnuyu_dlinu_i_budet_o.md"
```

## üêõ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### –¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏ –∏ –∏—Ö –æ–±—Ä–∞–±–æ—Ç–∫–∞

```python
# 1. –ü—É—Å—Ç–æ–π markdown
if not markdown_content:
    return {'success': False, 'error': 'Empty markdown content'}

# 2. Parse result —Å success=False
if not parse_result.get('success', False):
    return {'success': False, 'error': parse_result.get('error')}

# 3. –û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
try:
    self.output_dir.mkdir(parents=True, exist_ok=True)
except Exception as e:
    logger.error(f"Failed to create output directory | error={e}")

# 4. –û—à–∏–±–∫–∞ –∑–∞–ø–∏—Å–∏ —Ñ–∞–π–ª–∞
try:
    with open(md_path, 'w', encoding='utf-8') as f:
        f.write(final_content)
except Exception as e:
    return {'success': False, 'error': str(e)}
```

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

```python
# INFO —É—Ä–æ–≤–µ–Ω—å
logger.info(f"Markdown saved | file={md_filename} path={md_path} size={len(final_content)}")

# WARNING —É—Ä–æ–≤–µ–Ω—å
logger.warning(f"Parse result not successful | file={original_filename} error={result['error']}")
logger.warning(f"Empty markdown content | file={original_filename}")

# ERROR —É—Ä–æ–≤–µ–Ω—å
logger.error(f"Failed to save markdown | file={original_filename} error={type(e).__name__}: {e}")

# DEBUG —É—Ä–æ–≤–µ–Ω—å
logger.debug(f"Output directory ready | path={self.output_dir}")
```

## üìã Checklist –¥–ª—è –Ω–æ–≤—ã—Ö –ø–∞—Ä—Å–µ—Ä–æ–≤

–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ –ø–∞—Ä—Å–µ—Ä–∞ (Excel, TXT, etc.):

- [ ] –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å `get_markdown_writer()`
- [ ] –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤ –Ω–∞—á–∞–ª–µ –º–æ–¥—É–ª—è: `markdown_writer = get_markdown_writer('/volume_md')`
- [ ] –í Celery task –∑–∞–º–µ–Ω–∏—Ç—å –±–ª–æ–∫ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞:
  ```python
  save_result = markdown_writer.save(parse_result, file_name, timestamp)
  ```
- [ ] –í–æ–∑–≤—Ä–∞—â–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ `save_result`:
  ```python
  'markdown_file': save_result['markdown_file'],
  'markdown_path': save_result['markdown_path'],
  'markdown_length': save_result['markdown_length']
  ```
- [ ] **–ù–ï –¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å** –ª–æ–≥–∏–∫—É –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–º—ë–Ω —Ñ–∞–π–ª–æ–≤

## üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∫–æ–¥–∞

### –®–∞–≥–∏ –º–∏–≥—Ä–∞—Ü–∏–∏ task –Ω–∞ MarkdownWriter

1. **–î–æ–±–∞–≤–∏—Ç—å –∏–º–ø–æ—Ä—Ç:**
```python
from parsers.markdown_writer import get_markdown_writer
markdown_writer = get_markdown_writer('/volume_md')
```

2. **–£–¥–∞–ª–∏—Ç—å –±–ª–æ–∫ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–º–µ–Ω–∏:**
```python
# ‚ùå –£–î–ê–õ–ò–¢–¨
timestamp = datetime.utcnow().strftime('%Y%m%d_%H%M%S_%f')[:-3]
base_name = path.stem
safe_name = "".join(c for c in base_name if c.isalnum() or c in (' ', '-', '_')).strip()
safe_name = safe_name.replace(' ', '_')[:100]
md_filename = f"{timestamp}_{safe_name}.md"
```

3. **–ó–∞–º–µ–Ω–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ:**
```python
# ‚ùå –£–î–ê–õ–ò–¢–¨
output_dir = Path('/volume_md')
output_dir.mkdir(parents=True, exist_ok=True)
md_file_path = output_dir / md_filename
save_success = parser.save_to_markdown_file(parse_result, str(md_file_path))

# ‚úÖ –î–û–ë–ê–í–ò–¢–¨
timestamp = datetime.utcnow()
save_result = markdown_writer.save(parse_result, file_name, timestamp)

if not save_result['success']:
    return {'status': 'error', 'error': save_result['error']}
```

4. **–û–±–Ω–æ–≤–∏—Ç—å return:**
```python
return {
    'status': 'success',
    # ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ save_result
    'markdown_file': save_result['markdown_file'],
    'markdown_path': save_result['markdown_path'],
    'markdown_length': save_result['markdown_length'],
    # ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è
}
```

## üéì Best Practices

### ‚úÖ DO

- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å singleton `get_markdown_writer()`
- –ü–µ—Ä–µ–¥–∞–≤–∞—Ç—å `timestamp` —è–≤–Ω–æ –¥–ª—è –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ –ª–æ–≥–æ–≤
- –ü—Ä–æ–≤–µ—Ä—è—Ç—å `save_result['success']` –ø–µ—Ä–µ–¥ –≤–æ–∑–≤—Ä–∞—Ç–æ–º
- –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ –∏–º—è —Ñ–∞–π–ª–∞ –≤ –æ—à–∏–±–∫–∞—Ö

### ‚ùå DON'T

- –ù–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—ã–µ —ç–∫–∑–µ–º–ø–ª—è—Ä—ã `MarkdownWriter()` –≤ –∫–∞–∂–¥–æ–π task
- –ù–µ –¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É —Ç—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏–∏ –≤ —Å–≤–æ—ë–º –∫–æ–¥–µ
- –ù–µ –º–µ–Ω—è—Ç—å —Ñ–æ—Ä–º–∞—Ç timestamp (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏)
- –ù–µ –∑–∞–±—ã–≤–∞—Ç—å –ø—Ä–æ –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ `save_result`

## üìñ –°–≤—è–∑–∞–Ω–Ω—ã–µ –º–æ–¥—É–ª–∏

- `base_parser.py` - –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–ª—è –ø–∞—Ä—Å–µ—Ä–æ–≤ (–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `parse()`)
- `pdf_parser.py` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç MarkdownWriter –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
- `word_parser.py` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç MarkdownWriter –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
- `mock_parser.py` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç MarkdownWriter –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
- `pdf_tasks.py` - Celery task –¥–ª—è PDF (–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å MarkdownWriter)
- `word_tasks.py` - Celery task –¥–ª—è Word (–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å MarkdownWriter)

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –≤—ã–≤–æ–¥–∞

```python
# –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é /volume_md
markdown_writer = get_markdown_writer('/volume_md')

# –î–ª—è —Ç–µ—Å—Ç–æ–≤ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
test_writer = MarkdownWriter('/tmp/test_output')
```

### –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è —Ç—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏–∏

–ï—Å–ª–∏ –Ω—É–∂–Ω–∞ –¥—Ä—É–≥–∞—è —Å—Ö–µ–º–∞ —Ç—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏–∏ - –∏–∑–º–µ–Ω–∏—Ç—å `translit_map` –≤ `_make_safe_filename()`.

**–ü—Ä–∏–º–µ—Ä:** –î–æ–±–∞–≤–∏—Ç—å —É–∫—Ä–∞–∏–Ω—Å–∫–∏–µ –±—É–∫–≤—ã:
```python
translit_map = {
    # ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ä—É—Å—Å–∫–∏–µ ...
    '—ñ': 'i', '—ó': 'yi', '—î': 'ye', '“ë': 'g',  # —É–∫—Ä–∞–∏–Ω—Å–∫–∏–µ
}
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### Unit —Ç–µ—Å—Ç—ã –¥–ª—è MarkdownWriter

```python
def test_safe_filename_russian():
    writer = MarkdownWriter('/tmp')
    safe = writer._make_safe_filename('–î–æ–≥–æ–≤–æ—Ä –ø–æ—Å—Ç–∞–≤–∫–∏.pdf')
    assert safe == 'Dogovor_postavki'

def test_safe_filename_special_chars():
    writer = MarkdownWriter('/tmp')
    safe = writer._make_safe_filename('–ü—Ä–æ—Ç–æ–∫–æ–ª ‚Ññ145.docx')
    assert '145' in safe
    assert 'Protokol' in safe

def test_save_success():
    writer = MarkdownWriter('/tmp/test_output')
    parse_result = {
        'success': True,
        'yaml_header': '---\ntitle: Test\n---',
        'markdown': '# Content'
    }
    result = writer.save(parse_result, 'test.pdf')
    assert result['success'] == True
    assert 'test' in result['markdown_file']
```

## üìà –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

### –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è

1. **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –¥—Ä—É–≥–∏—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ –≤—ã–≤–æ–¥–∞:**
   - JSON (–¥–ª—è API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏)
   - Plain text (–¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –∏–Ω–¥–µ–∫—Å–æ–≤)
   - HTML (–¥–ª—è web preview)

2. **–ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è —Ç—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏—è:**
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å `unidecode` –¥–ª—è –≤—Å–µ—Ö —è–∑—ã–∫–æ–≤
   - Customizable transliteration schemes

3. **–í–∞–ª–∏–¥–∞—Ü–∏—è Markdown:**
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ YAML frontmatter
   - Lint Markdown —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞

4. **–ú–µ—Ç—Ä–∏–∫–∏:**
   - –°—á—ë—Ç—á–∏–∫ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
   - –°—Ä–µ–¥–Ω–∏–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–æ–≤
   - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ—à–∏–±–æ–∫

## üéØ –ò—Ç–æ–≥

**MarkdownWriter** - —ç—Ç–æ:
- ‚úÖ **–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏—è**: –í—Å—è –ª–æ–≥–∏–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ
- ‚úÖ **DRY**: –ù–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞ –º–µ–∂–¥—É tasks
- ‚úÖ **–ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏–µ**: –û–¥–∏–Ω–∞–∫–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–ª—è –≤—Å–µ—Ö –ø–∞—Ä—Å–µ—Ä–æ–≤
- ‚úÖ **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç—å**: –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ 1 —Ñ–∞–π–ª–µ ‚Üí –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –≤–µ–∑–¥–µ
- ‚úÖ **–¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å**: –õ–µ–≥–∫–æ –ø–æ–∫—Ä—ã—Ç—å unit-—Ç–µ—Å—Ç–∞–º–∏
- ‚úÖ **–†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å**: –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ö–æ–¥ —Å—Ç–∞–ª —á–∏—â–µ, –ø—Ä–æ—â–µ –∏ –Ω–∞–¥—ë–∂–Ω–µ–µ. üöÄ
