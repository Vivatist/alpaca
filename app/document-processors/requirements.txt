# ALPACA Document Processors Dependencies

# Core dependencies
celery[amqp]>=5.3.0      # Celery task queue with RabbitMQ support
pika>=1.3.0              # RabbitMQ client (for Celery broker)
PyYAML==6.0.1            # YAML configuration parsing
prometheus_client==0.19.0  # Prometheus metrics
psutil==5.9.6            # System monitoring

# Document processing libraries
pypdf>=3.17.0            # Modern PDF processing (replaces PyPDF2)
python-docx==0.8.11      # Word document processing  
python-pptx>=0.6.21      # PowerPoint document processing
openpyxl==3.1.2          # Excel processing
chardet==5.2.0           # Character encoding detection
pdf2image>=1.16.0        # Convert PDF pages to images for OCR
olefile>=0.46            # Read legacy .doc files (OLE2 format)

# Word parsing with OCR support
markitdown[all]>=0.0.1a2 # Microsoft's Markdown converter with all dependencies (docx, xlsx, pptx support)
# Используем полную версию unstructured (уже предустановлена в базовом образе)
# unstructured>=0.10.0 уже есть в образе downloads.unstructured.io
pillow>=10.0.0           # Image processing
pytesseract>=0.3.10      # Tesseract OCR wrapper
lxml>=4.9.0              # XML processing
beautifulsoup4>=4.12.0   # HTML parsing

# Optional: Enhanced document processing
# pdfplumber==0.10.0     # Advanced PDF processing
# pandas==2.1.4          # Data manipulation for Excel
# python-magic==0.4.27   # File type detection

# Development dependencies (for local development)
pytest==7.4.4
pytest-asyncio==0.21.1
black==23.12.1
isort==5.13.2
flake8==6.1.0

# Logging
structlog==23.2.0

# Text cleaning
ftfy>=6.1.0              # Fix mojibake and other text encoding issues
clean-text>=0.6.0        # Advanced text normalization and cleaning